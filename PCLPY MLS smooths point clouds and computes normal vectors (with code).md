#  First, the principle of MLS 

##  1. Overview 

>  Original English paper: Surfaces Generated by Moving Least Squares Methods Related literature: [1] Zeng Qinghong, Lu Detang. Curve and surface fitting based on moving least squares method [J]. Journal of Engineering Graphics, 2004 (01): 84-89. [2] Wei Ya, Xiao Yong, Yan Chuang, Liu Yalin, Wang Linbing. Optimization of pavement 3D reconstruction data based on point cloud preprocessing [J]. Journal of Jilin University (Engineering Edition), 2020, 50 (03): 987-997.pcl :: Moving Least Squares massive point cloud data processing theory and technology [Cheng Xiaojun, Jia Dongfeng, Cheng Xiaolong edited] 2014 edition, this book has a detailed description of the principle of moving least squares. 

##  2. Moving least squares method 

   The moving least squares method fits a moving least squares surface to the neighborhood of each sampling point, and calculates the normal vector and curvature of the sampling point based on the information of the local surface. It is usually divided into 3 steps to calculate: Step 1: Calculate the local approximate hyperplane. The local approximate hyperplane is = {}, where the normal vector of the hyperplane is the neighborhood point of the point, so that the following nonlinear energy function should be minimized: Among them, it is a monotonically decreasing positive weight function, which is usually taken as the global estimation of the sampling space distance. It can control the smoothness of the moving least squares surface, which can be dynamically taken as the radius of the surrounding sphere of the point K neighborhood. Step 2: Least squares fitting. Use the local quadric surface to fit the local point cloud. Suppose it is the orthogonal projection to the top, its local two-dimensional coordinates, and its height above can make the following errors, minimum: Step 3: Get the point corresponding to the point on the moving least squares surface. Usually, the normal direction of the hyperplane estimated in the first step is used as the normal direction of the sampling point. Because the moving least squares estimation normal direction is obtained by nonlinear optimization, the method is more accurate. Comparing the covariance analysis method with the moving least squares method, the covariance analysis method is not as accurate as the moving least squares method, but the computational efficiency is greatly improved, and it is more suitable when the point cloud scale is large. The moving least squares method improves the estimation accuracy on the basis of sacrificing efficiency, and is more suitable when the point cloud scale is small or the estimation accuracy of the point cloud normal vector and curvature has higher requirements. 

##  3. References 

>  [1] Lancaster, P. and K. Salkauskas. “Surfaces generated by moving least squares methods.” Mathematics of Computation 37 (1981): 141-158. 

#  Code implementation 

  ```python  
After clicking on the GitHub Sponsor button above, you will obtain access permissions to my private code repository ( https://github.com/slowlon/my_code_bar ) to view this blog code. By searching the code number of this blog, you can find the code you need, code number is: 2024020309574465722
  ```  
#  III. Display of results 

  ```python  
After clicking on the GitHub Sponsor button above, you will obtain access permissions to my private code repository ( https://github.com/slowlon/my_code_bar ) to view this blog code. By searching the code number of this blog, you can find the code you need, code number is: 2024020309574465722
  ```  
>  Failed to find match for field'rgb '. Because PointXYZRGB () is used, and the raw point cloud data entered does not contain rgb information. 

 ![avatar]( 96648113184147f68cd010ae24ae3f8a.png) 

